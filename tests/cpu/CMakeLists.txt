cmake_minimum_required(VERSION 3.13)
project(x64)
set(CMAKE_CXX_STANDARD 17)

set(CC_OPTIONS -g -O0 -DDEBUG -fpic)
set(LD_OPTIONS)

add_executable(test_pshufd src/test_pshufd.cpp)
target_compile_options(test_pshufd PUBLIC ${CC_OPTIONS})
target_compile_options(test_pshufd PUBLIC -DFMT_HEADER_ONLY)
target_include_directories(test_pshufd PUBLIC include ${CMAKE_SOURCE_DIR}/include ${CMAKE_SOURCE_DIR}/external)
target_link_libraries(test_pshufd PUBLIC emulator)
target_link_options(test_pshufd PUBLIC ${LD_OPTIONS})
add_test(NAME pshufd COMMAND test_pshufd)

add_executable(test_tzcnt src/test_tzcnt.cpp)
target_compile_options(test_tzcnt PUBLIC ${CC_OPTIONS})
target_compile_options(test_tzcnt PUBLIC -DFMT_HEADER_ONLY)
target_include_directories(test_tzcnt PUBLIC include ${CMAKE_SOURCE_DIR}/include ${CMAKE_SOURCE_DIR}/external)
target_link_libraries(test_tzcnt PUBLIC emulator)
target_link_options(test_tzcnt PUBLIC ${LD_OPTIONS})
add_test(NAME tzcnt COMMAND test_tzcnt)

add_executable(test_sub src/test_sub.cpp)
target_compile_options(test_sub PUBLIC ${CC_OPTIONS})
target_compile_options(test_sub PUBLIC -DFMT_HEADER_ONLY)
target_include_directories(test_sub PUBLIC include ${CMAKE_SOURCE_DIR}/include ${CMAKE_SOURCE_DIR}/external)
target_link_libraries(test_sub PUBLIC emulator)
target_link_options(test_sub PUBLIC ${LD_OPTIONS})
add_test(NAME sub COMMAND test_sub)

add_executable(test_rol src/test_rol.cpp)
target_compile_options(test_rol PUBLIC ${CC_OPTIONS})
target_compile_options(test_rol PUBLIC -DFMT_HEADER_ONLY)
target_include_directories(test_rol PUBLIC include ${CMAKE_SOURCE_DIR}/include ${CMAKE_SOURCE_DIR}/external)
target_link_libraries(test_rol PUBLIC emulator)
target_link_options(test_rol PUBLIC ${LD_OPTIONS})
add_test(NAME rol COMMAND test_rol)

add_executable(test_ror src/test_ror.cpp)
target_compile_options(test_ror PUBLIC ${CC_OPTIONS})
target_compile_options(test_ror PUBLIC -DFMT_HEADER_ONLY)
target_include_directories(test_ror PUBLIC include ${CMAKE_SOURCE_DIR}/include ${CMAKE_SOURCE_DIR}/external)
target_link_libraries(test_ror PUBLIC emulator)
target_link_options(test_ror PUBLIC ${LD_OPTIONS})
add_test(NAME ror COMMAND test_ror)

add_executable(test_shl src/test_shl.cpp)
target_compile_options(test_shl PUBLIC ${CC_OPTIONS})
target_compile_options(test_shl PUBLIC -DFMT_HEADER_ONLY)
target_include_directories(test_shl PUBLIC include ${CMAKE_SOURCE_DIR}/include ${CMAKE_SOURCE_DIR}/external)
target_link_libraries(test_shl PUBLIC emulator)
target_link_options(test_shl PUBLIC ${LD_OPTIONS})
add_test(NAME shl COMMAND test_shl)

add_executable(test_shr src/test_shr.cpp)
target_compile_options(test_shr PUBLIC ${CC_OPTIONS})
target_compile_options(test_shr PUBLIC -DFMT_HEADER_ONLY)
target_include_directories(test_shr PUBLIC include ${CMAKE_SOURCE_DIR}/include ${CMAKE_SOURCE_DIR}/external)
target_link_libraries(test_shr PUBLIC emulator)
target_link_options(test_shr PUBLIC ${LD_OPTIONS})
add_test(NAME shr COMMAND test_shr)